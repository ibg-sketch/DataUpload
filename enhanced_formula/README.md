# üöÄ Enhanced Formula Module
## Machine Learning Formula for Price Movement Prediction

---

## üìä –¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–°

**–í–µ—Ä—Å–∏—è:** Enhanced v1 (12 —Ñ–∞–∫—Ç–æ—Ä–æ–≤)  
**–ü—Ä–æ–≥—Ä–µ—Å—Å:** üü° –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö (0/50 —Å–∏–≥–Ω–∞–ª–æ–≤)  
**ETA:** 24-48 —á–∞—Å–æ–≤ –¥–æ –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–∏

---

## üìÅ –§–ê–ô–õ–´

### üîß **–û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏:**

1. **`train_enhanced_formula.py`** - –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
   - –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –ª–∏–Ω–µ–π–Ω–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è
   - Cross-validation
   - Feature importance –∞–Ω–∞–ª–∏–∑
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –≤ `.pkl`

2. **`enhanced_formula_integration.py`** - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–æ—Ç–æ–º
   - –ó–∞–≥—Ä—É–∑–∫–∞ –æ–±—É—á–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏
   - –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è —Ü–µ–Ω—ã
   - –†–∞—Å—á—ë—Ç —Ç–∞—Ä–≥–µ—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ ML
   - Fallback –Ω–∞ —Å—Ç–∞—Ä—É—é —Ñ–æ—Ä–º—É–ª—É

3. **`correlation_last_hour.py`** - –ê–Ω–∞–ª–∏–∑ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–π
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—É–ª—ã —Å —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å—é
   - R¬≤ –º–µ—Ç—Ä–∏–∫–∞
   - Win rate –∞–Ω–∞–ª–∏–∑

### üìã **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**

4. **`ENHANCED_FORMULA_PLAN.md`** - –ü–æ–ª–Ω—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
   - 5-—à–∞–≥–æ–≤–∞—è –¥–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞
   - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏
   - –ö–æ–º–∞–Ω–¥—ã –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

### üìà **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (legacy):**

5. `analyze_real_signals.py` - –ê–Ω–∞–ª–∏–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤
6. `math_correlation_analysis.py` - –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–π
7. `enhanced_formula_proposal.py` - –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ

---

## üéØ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
```bash
# –°–∫–æ–ª—å–∫–æ —Å–∏–≥–Ω–∞–ª–æ–≤ —Å –Ω–æ–≤—ã–º–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏ –Ω–∞–∫–æ–ø–∏–ª–æ—Å—å?
cd enhanced_formula
awk -F',' 'NF==21 && $17!=""' ../effectiveness_log.csv | wc -l
```

### –®–∞–≥ 2: –û–±—É—á–∏—Ç—å –º–æ–¥–µ–ª—å (–∫–æ–≥–¥–∞ –±—É–¥–µ—Ç ‚â•50 —Å–∏–≥–Ω–∞–ª–æ–≤)
```bash
cd enhanced_formula
python3 train_enhanced_formula.py
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –º–æ–¥–µ–ª–∏
```bash
cd enhanced_formula
python3 enhanced_formula_integration.py
```

### –®–∞–≥ 4: –ê–Ω–∞–ª–∏–∑ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–π
```bash
cd enhanced_formula
python3 correlation_last_hour.py
```

---

## üìà –ú–ï–¢–†–ò–ö–ò

### –¢–µ–∫—É—â–∞—è —Ñ–æ—Ä–º—É–ª–∞ (–±–∞–∑–æ–≤–∞—è):
- **R¬≤ = 0.014** (–æ–±—ä—è—Å–Ω—è–µ—Ç 1.4% –¥–≤–∏–∂–µ–Ω–∏—è —Ü–µ–Ω—ã)
- **–ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è = 0.12** (–æ—á–µ–Ω—å —Å–ª–∞–±–∞—è)
- **Win Rate = 100%** (–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∏–¥–µ–∞–ª—å–Ω–æ)

### –¶–µ–ª—å —É–ª—É—á—à–µ–Ω–Ω–æ–π —Ñ–æ—Ä–º—É–ª—ã:
- **R¬≤ = 0.2-0.4** (–≤ 14-28 —Ä–∞–∑ –ª—É—á—à–µ!)
- **–ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è = 0.45-0.63**
- **Win Rate ‚â• 70%** (—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ)

---

## üîÑ WORKFLOW

```
1. –ë–û–¢ –†–ê–ë–û–¢–ê–ï–¢
   ‚Üì –ª–æ–≥–∏—Ä—É–µ—Ç —Å–∏–≥–Ω–∞–ª—ã —Å RSI, EMA, ADX, Funding
   
2. –ù–ê–ö–û–ü–õ–ï–ù–ò–ï –î–ê–ù–ù–´–• (24-48 —á–∞—Å–æ–≤)
   ‚Üì effectiveness_log.csv ‚Üí 50+ —Å–∏–≥–Ω–∞–ª–æ–≤
   
3. –û–ë–£–ß–ï–ù–ò–ï –ú–û–î–ï–õ–ò
   ‚Üì train_enhanced_formula.py
   
4. –ú–û–î–ï–õ–¨ –°–û–•–†–ê–ù–ï–ù–ê
   ‚Üì enhanced_formula_model.pkl
   
5. –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –í –ë–û–¢
   ‚Üì enhanced_formula_integration.py
   
6. –ú–û–ù–ò–¢–û–†–ò–ù–ì
   ‚Üì correlation_last_hour.py
```

---

## ‚ö° –ö–û–ú–ê–ù–î–´

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
wc -l ../effectiveness_log.csv

# –û–±—É—á–∏—Ç—å –º–æ–¥–µ–ª—å
python3 train_enhanced_formula.py

# –°—Ç–∞—Ç—É—Å –º–æ–¥–µ–ª–∏  
python3 enhanced_formula_integration.py

# –ê–Ω–∞–ª–∏–∑ –∑–∞ —á–∞—Å
python3 correlation_last_hour.py

# –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –∫–æ—Ä–µ–Ω—å
cd ..
```

---

## üìö –ü–û–õ–ù–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

–ß–∏—Ç–∞–π **`ENHANCED_FORMULA_PLAN.md`** –¥–ª—è:
- –î–µ—Ç–∞–ª—å–Ω–æ–≥–æ 5-—à–∞–≥–æ–≤–æ–≥–æ –ø–ª–∞–Ω–∞
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –¥–µ—Ç–∞–ª–µ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- Troubleshooting
- Roadmap –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –≤–µ—Ä—Å–∏–π

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-11-04  
**–°—Ç–∞—Ç—É—Å:** üü° –û–∂–∏–¥–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
